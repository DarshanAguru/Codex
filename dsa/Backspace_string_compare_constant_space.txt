// Date: 07/01/2026
// Problem: https://leetcode.com/problems/backspace-string-compare/
// Leetcode Problem No: 844
// Relevance: String, Stack, Two Pointers, Simulation

import java.lang.*;
import java.util.*;

class Main {

  public static void main(String[] args) {
    String s = "ab##";
    String t = "c#d#";
    boolean res = backspaceCompare(s, t);
    System.out.println(res);
  }

  // Two Pointers approach (O(1) Space)
  // We iterate backwards because we know which characters are deleted by backspaces that come *after* them.
  static boolean backspaceCompare(String s, String t) {
    int i = s.length() - 1;
    int j = t.length() - 1;
    int skipS = 0;
    int skipT = 0;

    while (i >= 0 || j >= 0) {
      // Find the next valid char in S
      while (i >= 0) {
        if (s.charAt(i) == '#') {
          skipS++;
          i--;
        } else if (skipS > 0) {
          skipS--; // Skip current char as it is deleted
          i--;
        } else {
          break; // Found a valid char
        }
      }

      // Find the next valid char in T
      while (j >= 0) {
        if (t.charAt(j) == '#') {
          skipT++;
          j--;
        } else if (skipT > 0) {
          skipT--;
          j--;
        } else {
          break;
        }
      }

      // Compare current valid characters
      if (i >= 0 && j >= 0 && s.charAt(i) != t.charAt(j)) {
        return false;
      }

      // If one string exhausted but other isn't
      if ((i >= 0) != (j >= 0)) {
        return false;
      }

      i--;
      j--;
    }

    return true;
  }
}
