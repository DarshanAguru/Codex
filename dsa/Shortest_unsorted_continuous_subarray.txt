// Problem: https://leetcode.com/problems/shortest-unsorted-continuous-subarray/

import java.lang.*;
import java.util.*;

class Main {

  public static void main(String[] args) {
    int[] arr = { 2, 6, 4, 8, 10, 9, 15 };
    int res = findUnsortedSubarray(arr);
    System.out.println(res);
  }

  static int findUnsortedSubarray(int[] arr) {
    int n = arr.length;
    int end = -1;
    int start = -1;

    int maxSoFar = Integer.MIN_VALUE;
    for (int i = 0; i < n; i++) {
      if (maxSoFar > arr[i]) {
        end = i;
      }
      maxSoFar = Math.max(maxSoFar, arr[i]);
    }

    int minSoFar = Integer.MAX_VALUE;
    for (int i = n - 1; i >= 0; i--) {
      if (minSoFar < arr[i]) {
        start = i;
      }
      minSoFar = Math.min(minSoFar, arr[i]);
    }

    if (start == -1) return 0;
    return end - start + 1;
  }
}
