// Date: 12/08/2025
// Problem: https://leetcode.com/problems/word-search/

import java.lang.*;
import java.util.*;

class Main {

  public static void main(String[] args) {
    char[][] grid = { { 'A', 'B', 'C' }, { 'A', 'E', 'D' }, { 'A', 'F', 'G' } };

    String word = "AEFG";
    boolean ans = false;

    for (int i = 0; i < grid.length; i++) {
      for (int j = 0; j < grid[0].length; j++) {
        if (grid[i][j] == word.charAt(0)) {
          if (solve(grid, word, i, j, 0)) {
            ans = true;
            break;
          }
        }
      }
      if (ans) break;
    }

    System.out.println(ans);
  }

  static boolean solve(char[][] grid, String word, int i, int j, int idx) {
    if (idx == word.length()) return true;

    if (
      i < 0 ||
      i >= grid.length ||
      j < 0 ||
      j >= grid[0].length ||
      grid[i][j] != word.charAt(idx)
    ) {
      return false;
    }

    char temp = grid[i][j];
    grid[i][j] = '*'; // Mark as visited

    boolean found =
      solve(grid, word, i + 1, j, idx + 1) ||
      solve(grid, word, i, j + 1, idx + 1) ||
      solve(grid, word, i - 1, j, idx + 1) ||
      solve(grid, word, i, j - 1, idx + 1);

    grid[i][j] = temp; // Backtrack

    return found;
  }
}
