// Date: 18/08/2025
// Problem: https://leetcode.com/problems/sliding-window-maximum/

import java.lang.*;
import java.util.*;

class Main {

  public static void main(String[] args) {
    int[] arr = { 4, 0, -1, 3, 5, 3, 6, 8 };
    int k = 3;

    int[] res = getMaxSlidingWindow(arr, k);
    System.out.println(Arrays.toString(res));
  }

  static int[] getMaxSlidingWindow(int[] arr, int k) {
    int n = arr.length;
    if (n == 0) return new int[0];

    int[] res = new int[n - k + 1];
    int idx = 0;
    Deque<Integer> dq = new ArrayDeque<>();

    for (int i = 0; i < n; i++) {
      // Remove indices out of window
      if (!dq.isEmpty() && dq.peek() == i - k) {
        dq.poll();
      }

      // Maintain monotonic decreasing queue
      while (!dq.isEmpty() && arr[dq.peekLast()] < arr[i]) {
        dq.pollLast();
      }

      dq.offer(i);

      // Store result once window size is reached
      if (i >= k - 1) {
        res[idx++] = arr[dq.peek()];
      }
    }
    return res;
  }
}
